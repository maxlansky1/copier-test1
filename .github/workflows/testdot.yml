name: –ü—Ä–æ–≤–µ—Ä–∫–∞ PlantUML –∏ Graphviz

on: [push]

jobs:
  check-plantuml-graphviz:
    runs-on: ubuntu-latest

    steps:
      - name: üìÅ –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
        uses: actions/checkout@v3

      - name: ‚òï –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Java –∏ Graphviz (–Ω—É–∂–Ω–∞ –¥–ª—è PlantUML)
        run: |
          sudo apt-get update
          sudo apt-get install -y default-jre graphviz

      - name: üåø –°–∫–∞—á–∏–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é PlantUML
        run: |
          # –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è PlantUML –≤ /usr/local/bin, —Å–∫–∞—á–∏–≤–∞–µ–º PlantUML
          sudo mkdir -p /usr/local/bin/plantuml
          sudo wget -q https://github.com/plantuml/plantuml/releases/latest/download/plantuml.jar -O /usr/local/bin/plantuml/plantuml.jar
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏—é PlantUML
          java -jar /usr/local/bin/plantuml/plantuml.jar -version

      - name: –ü—Ä–æ–≤–µ—Ä–∫–∞ Graphviz –∏ Dot —á–µ—Ä–µ–∑ PlantUML
        run: |
          # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É Graphviz (dot)
          dot -V
          # –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ Graphviz —Ä–∞–±–æ—Ç–∞–µ—Ç —Å PlantUML
          java -jar /usr/local/bin/plantuml/plantuml.jar -testdot
